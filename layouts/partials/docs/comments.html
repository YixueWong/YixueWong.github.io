{{ if .Site.Params.utteranc.enable }}

{{ $issueTerm := .Site.Params.utteranc.issueTerm }}

{{ if (eq $issueTerm "i18nPathname") }}
  {{ $issueTerm = .Page.RelPermalink }}
  {{ $langPrefix := printf "/%s" .Lang }}

  {{ if hasPrefix $issueTerm $langPrefix }}
    {{ $issueTerm = replace .Page.RelPermalink $langPrefix "" 1}}
  {{ end }}

  {{ if (eq $issueTerm "/") }}
    {{ $issueTerm = "/about"}}
  {{ end }}
{{ end }}

<script src="https://utteranc.es/client.js"
        repo="{{ .Site.Params.utteranc.repo }}"
        issue-term="{{ $issueTerm }}"
        theme="{{ .Site.Params.utteranc.theme }}"
        comment-order="desc"
        crossorigin="anonymous"
        async>
</script>

{{ end }}
